<button class="toggle-button collapsed" (click)="toggleSidebar()">
    <span class="icon" [class.active]="sidebarActive">☰</span>
</button>


<div class="sidebar-wrapper">
    <!-- <div class="sidebar-collapsed" *ngIf="!sidebarActive">

    </div> -->
    <div class="sidebar" [class.active]="sidebarActive">
        <button class="toggle-button" (click)="toggleSidebar()">
            <span class="icon" [class.active]="sidebarActive">☰</span>
        </button>
        <div class="sidebar-header">
            <h1 class="sidebar-title">Last.fm Treemap</h1>
        </div>
        <div class="username-input">
            <label class="loading-text">Enter Username:</label>
            <div class="input-group">
                <input type="text" id="username" class="loading-input" [(ngModel)]="username" />
                <button class="loading-button" (click)="startFetching([], {}, { artists: {} }, [], [])">Submit</button>
            </div>
            <p class="or-text">OR</p>
            <input type="file" class="file-upload loading-input" (change)="fileInput($event)">
        </div>
        <p class="option-text">OPTIONS</p>
        <div class="date-select-wrapper">
            <div class="date-select">
                <label class="loading-text">Start Date:</label>
                <input type="date" id="start-date" class="date-box" [(ngModel)]="startDate" />
            </div>
            <div class="date-select">
                <label class="loading-text">End Date:</label>
                <input type="date" id="end-date" class="date-box" [(ngModel)]="endDate" />
            </div>
            <div class="top-level-wrapper">
                <label class="top-level-text">Top Level:</label>
                <select class="loading-select" [(ngModel)]="selectedView" (ngModelChange)="setSelectedView($event)">
                    <option *ngFor="let option of viewOptions" [value]="option">{{option}}</option>
                </select>
            </div>
            <div class="min-wrapper">
                <label class="loading-text">Minimum {{ selectedView }} Scrobbles:</label>
                <input type="text" id="minScrobbles" class="min-input" [(ngModel)]="minScrobbles" />
            </div>
            <div class="min-wrapper">
                <label class="loading-text"># of {{ selectedView }} Displayed:</label>
                <input type="text" id="minScrobbles" class="min-input" [(ngModel)]="numNodes" />
            </div>
        </div>
        <div class="bottom-buttons">
            <button class="bottom-button" (click)="applySettings()">Apply Options</button>
            <button class="bottom-button" (click)="downloadJSON()">Download JSON</button>
        </div>
        <p class="loading-text">
            Loading track page {{totalPages - pageNumber}}/{{totalPages}} <br>
            Scrobbles Fetched: {{scrobblesFetched}}
        </p>
        <div class="loading-bar-container">
            <div class="loading-bar" [style.width]="loadingBarWidth()"></div>
        </div>
    </div>
</div>